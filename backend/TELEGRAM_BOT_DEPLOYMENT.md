# ü§ñ TELEGRAM BOT DEPLOYMENT GUIDE

## ‚úÖ –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é!** Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–µ—Ä Jaguar Fight Club.

### üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç (/start, /help, /app)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
- ‚úÖ Webhook –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è production
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π polling –¥–ª—è development
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ graceful shutdown
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –±–æ—Ç–∞: `Jaguar Fight Club`
4. –í—ã–±–µ—Ä–∏—Ç–µ username: `jaguar_fight_club_bot` (–∏–ª–∏ –ª—é–±–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ)
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `/backend/.env`:

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=1234567890:AABbCcDdEeFfGgHhIiJjKkLlMmNnOoPpQqR
TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook/telegram
MINI_APP_URL=https://your-domain.com
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫

```bash
# –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ backend/
npm start
```

–ì–æ—Ç–æ–≤–æ! –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üéâ

---

## üìã –ö–û–ú–ê–ù–î–´ –ë–û–¢–ê

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ Mini App
- `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- `/app` - –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### Inline –∫–Ω–æ–ø–∫–∏:
- ü•ä –û—Ç–∫—Ä—ã—Ç—å Jaguar Fight Club (Web App)
- üìö –°–ø—Ä–∞–≤–∫–∞
- üîó –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
- üîÑ –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ telegram/           # Telegram Bot
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot.js         # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.js   # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ help.js    # –ö–æ–º–∞–Ω–¥–∞ /help
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.js     # –ö–æ–º–∞–Ω–¥–∞ /app
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ messages.js # –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ routes/
‚îÇ       ‚îî‚îÄ‚îÄ webhook.js     # Webhook –¥–ª—è Telegram
‚îú‚îÄ‚îÄ server.js              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º
‚îî‚îÄ‚îÄ .env                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:
- **Development**: Polling —Ä–µ–∂–∏–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
- **Production**: Webhook —Ä–µ–∂–∏–º (—Ç—Ä–µ–±—É–µ—Ç HTTPS)

### Endpoints:
- `POST /webhook/telegram` - Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `GET /webhook/telegram/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `POST /webhook/telegram/setup` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
- `DELETE /webhook/telegram/remove` - –£–¥–∞–ª–µ–Ω–∏–µ webhook

---

## üåç PRODUCTION DEPLOYMENT

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- HTTPS –¥–æ–º–µ–Ω
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- Telegram Bot Token

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook:

1. **–û–±–Ω–æ–≤–∏—Ç–µ .env –¥–ª—è production:**
```env
NODE_ENV=production
TELEGRAM_BOT_TOKEN=your_real_token
TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook/telegram
MINI_APP_URL=https://your-domain.com
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
npm start
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):**
   Webhook –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ production —Ä–µ–∂–∏–º–µ.

4. **–ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é:**
```bash
curl -X POST https://your-domain.com/webhook/telegram/setup
```

### Docker deployment:

```dockerfile
# –í Dockerfile —É–∂–µ –µ—Å—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3001

CMD ["npm", "start"]
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
node test-bot-integration.js

# –ó–∞–ø—É—Å–∫ —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
TELEGRAM_BOT_TOKEN=your_token npm start
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Mini App –∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã `/help` –∏ `/app`

---

## üö® TROUBLESHOOTING

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**1. Bot token invalid**
```
‚ùå ETELEGRAM: 404 Not Found
```
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ .env —Ñ–∞–π–ª–µ

**2. Webhook –æ—à–∏–±–∫–∏**
```
‚ùå Webhook setup failed
```
**–†–µ—à–µ–Ω–∏–µ**: 
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**3. Mini App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è**
**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MINI_APP_URL –≤ .env
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω

**4. Polling errors –≤ development**
**–†–µ—à–µ–Ω–∏–µ**: 
- –£–¥–∞–ª–∏—Ç–µ webhook: `curl -X DELETE your-domain.com/webhook/telegram/remove`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
# –í–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
DEBUG=telegram* npm start
```

### –ü–æ–ª–µ–∑–Ω—ã–µ endpoints –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
- `GET /webhook/telegram/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `GET /api/test` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö API endpoints
- `GET /health` - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìà –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏ –±–æ—Ç–∞:
```
ü§ñ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å UserName (12345) –≤—ã–ø–æ–ª–Ω–∏–ª –∫–æ–º–∞–Ω–¥—É /start
‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é UserName
üì® –ü–æ–ª—É—á–µ–Ω Telegram webhook update: {...}
```

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞
- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
- –û—à–∏–±–∫–∏ –∏ —Å–±–æ–∏

---

## üîÆ –ë–£–î–£–©–ò–ï –†–ê–°–®–ò–†–ï–ù–ò–Ø

### –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è (Phase 2):
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –æ—Ç —Ç—Ä–µ–Ω–µ—Ä–æ–≤
- ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- üí∞ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Telegram Payments
- üë• –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–ª—É–±–∞

### –ì–æ—Ç–æ–≤—ã–µ —Ö—É–∫–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:
- `getNewCommentNotification()` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- `getTrainingReminder()` - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
- `getProgressStats()` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## ‚úÖ CHECKLIST –î–õ–Ø DEPLOYMENT

### Pre-deployment:
- [ ] –°–æ–∑–¥–∞–Ω –±–æ—Ç —á–µ—Ä–µ–∑ @BotFather
- [ ] –ü–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω .env —Ñ–∞–π–ª
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

### Development:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å: `npm start`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/start` –≤ –±–æ—Ç–µ
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### Production:
- [ ] HTTPS –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Environment variables –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [ ] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

**Telegram Bot –¥–ª—è Jaguar Fight Club –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!**

‚ú® **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:**
- –ë—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä—ã—Ç—å Mini App –∏–∑ Telegram
- –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏

üöÄ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ø–æ–ª—É—á–∏–ª–∏:**
- –ì–æ—Ç–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API
- Webhook –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è production
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 2-3 —á–∞—Å–∞ ‚úÖ
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –ù–∏–∑–∫–∞—è ‚úÖ
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production**: 100% ‚úÖ